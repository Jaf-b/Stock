import{a as xt,b as St,c as vt,d as Mt,e as At,f as gt,g as yt,h as Dt,i as Et,j as Ft,k as It,l as wt,m as Pt}from"./chunk-HJI4H7LB.js";import{a as rt,b as lt,c as mt,d as dt,e as ct,f as st,g as pt,h as ut,i as ft,j as ht,k as _t,l as Ct,m as Tt,n as bt,o as N,p as j,q as kt,r as Vt}from"./chunk-Q3NTKMEE.js";import{a as K,b as x,d as W,e as X,g as b,h as Y,i as Z,j as tt,k as et,l as it,m as nt,n as P,q as k,r as V,s as L,t as O}from"./chunk-JXXXVDU4.js";import{l as Lt}from"./chunk-QKOWUZ2H.js";import{Ca as Q,Da as U,Ea as $,Fa as a,Ga as n,Ha as C,Ia as f,Ja as h,L as H,La as E,O as J,Oa as T,Qa as q,T as D,Ua as M,Va as A,Wa as g,X as S,Xa as G,Y as v,Ya as o,Za as s,ab as F,ia as d,ja as _,kc as at,pb as z,pc as I,qc as ot,rc as w,ta as p,wa as u}from"./chunk-REGT5QFK.js";var R=(()=>{let e=class e{constructor(i){this.http=i,this.API_URL="http://localhost:3000/Achat"}GetDataFromList(){return this.http.get(this.API_URL)}AddToList(i){return console.log(i),this.http.post(this.API_URL,i)}DeleteToList(i){return console.log(i),this.http.delete(`${this.API_URL}/${i}`)}UpdtaToList(i,r){return this.http.put(`${this.API_URL}/${i}`,r)}};e.\u0275fac=function(r){return new(r||e)(J(z))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qt=["qte"],Gt=["unitaire"];function Bt(t,e){if(t&1&&(a(0,"mat-option",8),o(1),n()),t&2){let m=e.$implicit;u("value",m),d(),s(m)}}function Ht(t,e){if(t&1&&(a(0,"mat-option",8),o(1),n()),t&2){let m=e.$implicit;u("value",m),d(),s(m)}}var B=(()=>{let e=class e{constructor(i,r,l,c){this._fb=i,this.achatservice=r,this.data=l,this.final=c,this.FourisseurName=["Jafred Bukulu","Sharon Lusagila","David Lusagila","Gladie Kika"],this.TypeVenteOption=["Details","gros"],this.AddForm=this._fb.group({date:new Date().toDateString(),NameFournisseur:new b("",x.required),Designation:new b("",x.required),Quantite:new b("",x.required),Prix_Unitaire:new b("",x.required),TypeDeVente:new b("",x.required),PrixTotal:new b})}OnClick(){this.AddForm.valid&&(this.data?(this.prixTotal=+this.quantite.nativeElement.value*+this.unitaire.nativeElement.value,this.AddForm.get("PrixTotal").setValue(this.prixTotal),this.objetStockFinal=It(this.data,this.StockFinal,this.AddForm),console.log("objet stock final : ",this.objetStockFinal),this.final.UpdtaToList(this.objetStockFinal.id,this.objetStockFinal).subscribe(i=>{}),this.achatservice.UpdtaToList(this.data.id,this.AddForm.value).subscribe(i=>{console.log(i)})):(this.prixTotal=+this.quantite.nativeElement.value*+this.unitaire.nativeElement.value,this.AddForm.get("PrixTotal").setValue(this.prixTotal),this.achatservice.AddToList(this.AddForm.value).subscribe(i=>{console.log(i),Pt(this.StockFinal,this.AddForm,this.final)}))),console.log("yes")}ngOnInit(){this.AddForm.patchValue(this.data),this.final.GetDataFromList().subscribe(i=>{this.StockFinal=i})}};e.\u0275fac=function(r){return new(r||e)(_(it),_(R),_(Mt),_(N))},e.\u0275cmp=D({type:e,selectors:[["app-add-product"]],viewQuery:function(r,l){if(r&1&&(M(qt,5),M(Gt,5)),r&2){let c;A(c=g())&&(l.quantite=c.first),A(c=g())&&(l.unitaire=c.first)}},standalone:!0,features:[F],decls:43,vars:2,consts:[["qte",""],["unitaire",""],["mat-dialog-title","",1,"flex"],["mat-dialog-content",""],[3,"formGroup"],[1,"flex","p-t"],["appearance","outline"],["formControlName","NameFournisseur"],[3,"value"],["type","text","matInput","","formControlName","Designation"],[1,"flex"],["type","number","matInput","","formControlName","Quantite"],["type","number","matInput","","formControlName","Prix_Unitaire"],["formControlName","TypeDeVente"],["type","number","matInput","",3,"value"],["mat-dialog-actions","",1,"flex"],["mat-raised-button","","mat-dialog-close","true"],["mat-raised-button","","color","primary","mat-dialog-close","true",3,"click"]],template:function(r,l){if(r&1){let c=E();a(0,"div",2)(1,"h1"),o(2,"Ajouter Un Produit"),n()(),a(3,"div",3)(4,"form",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),o(8,"Nom du Fournisseur"),n(),a(9,"mat-select",7),U(10,Bt,2,2,"mat-option",8,Q),n()(),a(12,"mat-form-field",6)(13,"mat-label"),o(14,"Designation"),n(),C(15,"input",9),n()(),a(16,"div",10)(17,"mat-form-field",6)(18,"mat-label"),o(19,"Quantit\xE9"),n(),C(20,"input",11,0),n(),a(22,"mat-form-field",6)(23,"mat-label"),o(24,"Prix Unitaire"),n(),C(25,"input",12,1),n()(),a(27,"div",10)(28,"mat-form-field",6)(29,"mat-label"),o(30,"Type de Vente"),n(),a(31,"mat-select",13),U(32,Ht,2,2,"mat-option",8,Q),n()(),a(34,"mat-form-field",6)(35,"mat-label"),o(36,"Prix Total"),n(),C(37,"input",14),n()()()(),a(38,"div",15)(39,"button",16),o(40,"Fermer"),n(),a(41,"button",17),T("click",function(){return S(c),v(l.OnClick())}),o(42,"Envoyer"),n()()}if(r&2){let c=G(21),y=G(26);d(4),u("formGroup",l.AddForm),d(6),$(l.FourisseurName),d(22),$(l.TypeVenteOption),d(5),u("value",+c.value*+y.value)}},dependencies:[V,k,P,O,L,St,xt,at,vt,w,I,Ft,gt,yt,Et,Dt,nt,Y,K,Z,W,X,tt,et],styles:[".flex[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.flex[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.flex[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.p[_ngcontent-%COMP%]{padding:1rem}.p-b[_ngcontent-%COMP%]{padding-bottom:1rem}.p-t[_ngcontent-%COMP%]{padding-top:1rem}"]});let t=e;return t})();function Jt(t,e){t&1&&(a(0,"th",19),o(1,"Date"),n())}function zt(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.date)}}function Kt(t,e){t&1&&(a(0,"th",19),o(1,"Nom du Fournisseur"),n())}function Wt(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.NameFournisseur)}}function Xt(t,e){t&1&&(a(0,"th",19),o(1,"Designation"),n())}function Yt(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.Designation)}}function Zt(t,e){t&1&&(a(0,"th",19),o(1,"Quantite"),n())}function te(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.Quantite)}}function ee(t,e){t&1&&(a(0,"th",19),o(1,"Prix Unitaire"),n())}function ie(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.Prix_Unitaire)}}function ne(t,e){t&1&&(a(0,"th",19),o(1,"Type de Vente"),n())}function ae(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.TypeDeVente)}}function oe(t,e){t&1&&(a(0,"th",19),o(1,"Prix Total"),n())}function re(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.PrixTotal)}}function le(t,e){t&1&&(a(0,"th",19),o(1,"ID"),n())}function me(t,e){if(t&1&&(a(0,"td",20),o(1),n()),t&2){let m=e.$implicit;d(),s(m.id)}}function de(t,e){t&1&&(a(0,"th",19),o(1,"Action"),n())}function ce(t,e){if(t&1){let m=E();a(0,"td",20)(1,"button",21),T("click",function(){let r=S(m).$implicit,l=q();return v(l.Edit(r))}),a(2,"mat-icon"),o(3,"edit"),n()(),a(4,"button",21),T("click",function(){let r=S(m).$implicit,l=q();return v(l.Delete(r.id))}),a(5,"mat-icon"),o(6,"delete"),n()()()}}function se(t,e){t&1&&C(0,"tr",22)}function pe(t,e){t&1&&C(0,"tr",23)}var je=(()=>{let e=class e{constructor(i,r,l){this.ServiceAchat=i,this.final=r,this.dialog=l,this.title="Gestion des Achats",this.components=!0,this.admin=JSON.parse(localStorage.getItem("admin")),this.displayedColumns=this.isAdmin()}ngOnInit(){this.ServiceAchat.GetDataFromList().subscribe(i=>{this.dataSource=new Ct(i),this.dataSource.sort=this.sort,this.achatStock=i}),this.final.GetDataFromList().subscribe(i=>{this.stockFinal=i})}Delete(i){this.ServiceAchat.DeleteToList(i).subscribe(r=>{let l=wt(this.stockFinal,r);this.final.UpdtaToList(l.id,l).subscribe(c=>{console.log(c)})})}Edit(i){this.dialog.open(B,{data:i})}ApplyFilter(i){let r=i.target.value;this.dataSource.filter=r.trim().toLocaleLowerCase(),console.log(r)}open(){this.dialog.open(B)}isAdmin(){let i;return this.admin?(i=["id","date","NameFournisseur","Designation","Quantite","Prix_Unitaire","TypeDeVente","PrixTotal","actions"],console.log(this.admin)):i=["id","date","NameFournisseur","Designation","Quantite","Prix_Unitaire","TypeDeVente","PrixTotal"],i}};e.\u0275fac=function(r){return new(r||e)(_(R),_(N),_(At))},e.\u0275cmp=D({type:e,selectors:[["app-achat-table"]],viewQuery:function(r,l){if(r&1&&M(j,5),r&2){let c;A(c=g())&&(l.sort=c.first)}},standalone:!0,features:[F],decls:39,vars:4,consts:[[3,"title"],["mat-raised-button","",3,"click"],[1,"body"],[1,"container"],["matInput","","placeholder","Ex. ium",3,"keyup"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","NameFournisseur"],["matColumnDef","Designation"],["matColumnDef","Quantite"],["matColumnDef","Prix_Unitaire"],["matColumnDef","TypeDeVente"],["matColumnDef","PrixTotal"],["matColumnDef","id"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,l){r&1&&(a(0,"app-admin-tool-bar",0)(1,"button",1),T("click",function(){return l.open()}),o(2,"Add Product"),n(),a(3,"div",2)(4,"div",3)(5,"mat-form-field")(6,"mat-label"),o(7,"Recherche"),n(),a(8,"input",4),T("keyup",function(y){return l.ApplyFilter(y)}),n()(),a(9,"table",5),f(10,6),p(11,Jt,2,0,"th",7)(12,zt,2,1,"td",8),h(),f(13,9),p(14,Kt,2,0,"th",7)(15,Wt,2,1,"td",8),h(),f(16,10),p(17,Xt,2,0,"th",7)(18,Yt,2,1,"td",8),h(),f(19,11),p(20,Zt,2,0,"th",7)(21,te,2,1,"td",8),h(),f(22,12),p(23,ee,2,0,"th",7)(24,ie,2,1,"td",8),h(),f(25,13),p(26,ne,2,0,"th",7)(27,ae,2,1,"td",8),h(),f(28,14),p(29,oe,2,0,"th",7)(30,re,2,1,"td",8),h(),f(31,15),p(32,le,2,0,"th",7)(33,me,2,1,"td",8),h(),f(34,16),p(35,de,2,0,"th",7)(36,ce,7,0,"td",8),h(),p(37,se,1,0,"tr",17)(38,pe,1,0,"tr",18),n()()()()),r&2&&(u("title",l.title),d(9),u("dataSource",l.dataSource),d(28),u("matHeaderRowDef",l.displayedColumns),d(),u("matRowDefColumns",l.displayedColumns))},dependencies:[V,k,P,O,L,_t,rt,mt,pt,dt,lt,ut,ct,st,ft,ht,bt,Tt,w,I,ot,Vt,j,kt,Lt],styles:[".body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100% justify-content:center;align-items:center;margin-top:50px}.container[_ngcontent-%COMP%]{width:90%}mat-form-field[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();export{je as a};
